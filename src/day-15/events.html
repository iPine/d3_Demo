<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Transition Events</title>
    <link rel="stylesheet" type="text/css" href="../../css/styles.css"/>
    <script type="text/javascript" src="../../d3/d3.js"></script>
</head>

<body>

<script type="text/javascript">
    var body = d3.select("body"), duration = 3000;

    var div = body.append("div")
            .classed("box", true)
            .style("background-color", "steelblue")
            .style("color", "white")
            .text("waiting") 
        .transition().duration(duration) 
                .delay(1000) // 有个延迟，在过渡初始化之前，先显示字体
                //第一个参数为字符串，第二个参数是一个事件监听函数
                .each("start", function(){ 
                    console.log(arguments);
                    d3.select(this).text(function (d, i) {
                        return "transitioning";
                    });
                })
                .each("end", function(){ 
                    d3.select(this).text(function (d, i) {
                        return "done";
                    });
                })
            .style("margin-left", "600px");
</script>

</body>

</html>